(()=>{"use strict";var e,i={802:()=>{const e=window.wp.blocks,i=window.wp.i18n,t=window.wp.blockEditor,o=window.wp.components,l=window.wp.element,s=window.ReactJSXRuntime,r=JSON.parse('{"UU":"somira/scroll-video-sections"}');(0,e.registerBlockType)(r.UU,{edit:function({attributes:e,setAttributes:r}){const{blockTitle:n,blockSubtitle:a,sections:c=[]}=e,d=(0,t.useBlockProps)(),[m,h]=(0,l.useState)(null);console.log("Edit component - current attributes:",{blockTitle:n,blockSubtitle:a,sections:c});const x=(0,l.useCallback)((e,i,t)=>{console.log("Updating section:",{index:e,field:i,value:t});const o=[...c||[]];o[e]&&(o[e]={...o[e],[i]:t},r({sections:o}),console.log("Updated sections:",o))},[c,r]),v=(0,l.useCallback)(()=>{if(c.length>=4)return;const e={id:Date.now(),title:`Section ${c.length+1}`,text:"Enter your section content here...",videoUrl:""};r({sections:[...c,e]})},[c,r]),p=(0,l.useCallback)(e=>{const i=c.filter((i,t)=>t!==e);r({sections:i}),m===e&&h(null)},[c,m,r]);return(0,s.jsxs)("div",{...d,children:[(0,s.jsxs)(t.InspectorControls,{children:[(0,s.jsxs)(o.PanelBody,{title:(0,i.__)("Block Settings","somira"),children:[(0,s.jsx)(o.TextControl,{label:(0,i.__)("Block Title","somira"),value:n,onChange:e=>r({blockTitle:e}),help:(0,i.__)("Main title for the scroll section","somira")}),(0,s.jsx)(o.TextControl,{label:(0,i.__)("Block Subtitle","somira"),value:a,onChange:e=>r({blockSubtitle:e}),help:(0,i.__)("Subtitle text below the main title","somira")})]}),(0,s.jsxs)(o.PanelBody,{title:(0,i.__)("Video Sections","somira"),initialOpen:!0,children:[(0,s.jsx)("p",{children:(0,i.__)("Manage your scroll video sections (max 4):","somira")}),0===c.length&&(0,s.jsx)("p",{style:{fontStyle:"italic",color:"#666"},children:(0,i.__)('No sections added yet. Click "Add Section" below to get started.',"somira")}),c.map((e,l)=>(0,s.jsxs)(o.Card,{style:{marginBottom:"20px",backgroundColor:m===l?"#f0f8ff":"#fafafa"},children:[(0,s.jsx)(o.CardHeader,{children:(0,s.jsxs)("h4",{style:{margin:"0"},children:[(0,i.__)("Section","somira")," ",l+1]})}),(0,s.jsxs)(o.CardBody,{children:[(0,s.jsx)(o.TextControl,{label:(0,i.__)("Section Title","somira"),value:e.title,onChange:e=>x(l,"title",e),placeholder:(0,i.__)("Enter section title...","somira"),style:{marginBottom:"10px"}}),(0,s.jsx)(o.TextControl,{label:(0,i.__)("Section Text","somira"),value:e.text,onChange:e=>x(l,"text",e),placeholder:(0,i.__)("Enter section description...","somira"),style:{marginBottom:"15px"}}),(0,s.jsx)(t.MediaUploadCheck,{children:(0,s.jsx)(t.MediaUpload,{onSelect:e=>x(l,"videoUrl",e.url),allowedTypes:["video"],value:e.id,render:({open:t})=>(0,s.jsx)(o.Button,{onClick:t,variant:"secondary",style:{marginBottom:"10px"},children:e.videoUrl?(0,i.__)("Change Video","somira"):(0,i.__)("Select Video","somira")})})}),e.videoUrl&&(0,s.jsx)("div",{style:{marginBottom:"10px"},children:(0,s.jsxs)("small",{style:{color:"#666"},children:[(0,i.__)("Video:","somira")," ",e.videoUrl.split("/").pop()]})}),(0,s.jsx)(o.Button,{onClick:()=>p(l),variant:"secondary",isDestructive:!0,size:"small",children:(0,i.__)("Remove Section","somira")})]})]},e.id)),c.length<4&&(0,s.jsxs)(o.Button,{onClick:v,variant:"primary",style:{marginTop:"10px"},children:[(0,i.__)("Add Section","somira")," (",c.length,"/4)"]})]})]}),(0,s.jsxs)("div",{className:"scroll-video-editor",children:[(0,s.jsxs)("div",{className:"editor-header",children:[(0,s.jsx)(t.RichText,{tagName:"h1",className:"block-title",value:n,onChange:e=>r({blockTitle:e}),placeholder:(0,i.__)("Block title...","somira"),allowedFormats:[]}),(0,s.jsx)(t.RichText,{tagName:"p",className:"block-subtitle",value:a,onChange:e=>r({blockSubtitle:e}),placeholder:(0,i.__)("Block subtitle...","somira"),allowedFormats:[]})]}),(0,s.jsx)("div",{className:"editor-preview",children:0===c.length?(0,s.jsx)(o.Placeholder,{label:(0,i.__)("Scroll Video Sections","somira"),instructions:(0,i.__)("Add sections using the sidebar panel to get started.","somira"),children:(0,s.jsx)(o.Button,{onClick:v,variant:"primary",children:(0,i.__)("Add First Section","somira")})}):(0,s.jsxs)("div",{className:"sections-grid",children:[(0,s.jsxs)("div",{className:"sections-column",children:[(0,s.jsx)("h3",{children:(0,i.__)("Text Sections","somira")}),c.map((e,t)=>(0,s.jsxs)("div",{className:"section-preview "+(m===t?"active":""),onClick:()=>h(t),style:{padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",marginBottom:"1rem",cursor:"pointer",backgroundColor:m===t?"#e3f2fd":"#fff"},children:[(0,s.jsx)("h4",{style:{margin:"0 0 0.5rem 0"},children:e.title}),(0,s.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:e.text||(0,i.__)("No content yet...","somira")})]},e.id))]}),(0,s.jsxs)("div",{className:"videos-column",children:[(0,s.jsx)("h3",{children:(0,i.__)("Videos","somira")}),c.map((e,t)=>(0,s.jsx)("div",{className:"video-preview",style:{marginBottom:"1rem",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:e.videoUrl?(0,s.jsx)("video",{src:e.videoUrl,style:{width:"100%",height:"auto",maxHeight:"200px"},controls:!1,muted:!0}):(0,s.jsx)("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#f5f5f5",color:"#666"},children:(0,i.__)("No video selected","somira")})},e.id))]})]})})]})]})},save:function({attributes:e}){const{blockTitle:i,blockSubtitle:o,sections:l}=e,r=t.useBlockProps.save();"undefined"!=typeof console&&console.log("Scroll Video Sections save data:",{blockTitle:i,blockSubtitle:o,sections:l});const n=(l||[]).filter(e=>e&&(e.videoUrl||e.title||e.text));return(0,s.jsxs)("div",{...r,"data-block-path":"/wp-content/themes/somira/blocks/scroll-video-sections/",children:[(0,s.jsxs)("div",{className:"scroll-video-wrapper",children:[(0,s.jsxs)("div",{className:"scroll-video-header",children:[(0,s.jsx)(t.RichText.Content,{tagName:"h2",className:"scroll-video-title",value:i}),(0,s.jsx)(t.RichText.Content,{tagName:"p",className:"scroll-video-subtitle",value:o})]}),(0,s.jsxs)("div",{className:"scroll-video-container",children:[(0,s.jsx)("div",{className:"text-sections-column",children:n.map((e,i)=>(0,s.jsx)("div",{className:"text-section","data-section-index":i,children:(0,s.jsxs)("div",{className:"section-content",children:[(0,s.jsx)("h3",{className:"section-title",children:e.title}),(0,s.jsx)("p",{className:"section-text",children:e.text})]})},e.id||i))}),(0,s.jsx)("div",{className:"video-sections-column",children:(0,s.jsx)("div",{className:"video-container",children:n.map((e,i)=>(0,s.jsx)("div",{className:"video-section","data-video-index":i,style:{display:0===i?"block":"none"},children:e.videoUrl?(0,s.jsx)("video",{className:"scroll-video",src:e.videoUrl,muted:!0,playsInline:!0,preload:"metadata","data-section":i}):(0,s.jsx)("div",{className:"video-placeholder",children:(0,s.jsxs)("p",{children:["No video selected for section ",i+1]})})},e.id||i))})})]})]}),(0,s.jsxs)("div",{className:"mobile-scroll-alternative",children:[(0,s.jsx)("div",{className:"mobile-scroll-container",style:{height:100*n.length+"vh"},children:(0,s.jsx)("canvas",{id:"mobileSequence",className:"mobile-canvas",width:"450",height:"800"})}),(0,s.jsxs)("div",{className:"mobile-overlay",children:[(0,s.jsx)("h2",{className:"mobile-text-title",id:"mobileTextTitle",children:n[0]?.title||"Interactive Experience"}),(0,s.jsx)("p",{className:"mobile-text-description",id:"mobileTextDescription",children:n[0]?.text||"Scroll to explore the interactive experience."})]})]})]})}})}},t={};function o(e){var l=t[e];if(void 0!==l)return l.exports;var s=t[e]={exports:{}};return i[e](s,s.exports,o),s.exports}o.m=i,e=[],o.O=(i,t,l,s)=>{if(!t){var r=1/0;for(d=0;d<e.length;d++){for(var[t,l,s]=e[d],n=!0,a=0;a<t.length;a++)(!1&s||r>=s)&&Object.keys(o.O).every(e=>o.O[e](t[a]))?t.splice(a--,1):(n=!1,s<r&&(r=s));if(n){e.splice(d--,1);var c=l();void 0!==c&&(i=c)}}return i}s=s||0;for(var d=e.length;d>0&&e[d-1][2]>s;d--)e[d]=e[d-1];e[d]=[t,l,s]},o.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={57:0,350:0};o.O.j=i=>0===e[i];var i=(i,t)=>{var l,s,[r,n,a]=t,c=0;if(r.some(i=>0!==e[i])){for(l in n)o.o(n,l)&&(o.m[l]=n[l]);if(a)var d=a(o)}for(i&&i(t);c<r.length;c++)s=r[c],o.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return o.O(d)},t=globalThis.webpackChunksomira_theme=globalThis.webpackChunksomira_theme||[];t.forEach(i.bind(null,0)),t.push=i.bind(null,t.push.bind(t))})();var l=o.O(void 0,[350],()=>o(802));l=o.O(l)})();