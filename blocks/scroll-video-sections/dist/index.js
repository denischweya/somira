(()=>{"use strict";var e,i={802:()=>{const e=window.wp.blocks,i=window.wp.i18n,s=window.wp.blockEditor,l=window.wp.components,o=window.wp.element,t=window.ReactJSXRuntime,a=JSON.parse('{"UU":"somira/scroll-video-sections"}');(0,e.registerBlockType)(a.UU,{edit:function({attributes:e,setAttributes:a}){const{blockTitle:n,blockSubtitle:r,sections:c=[]}=e,d=(0,s.useBlockProps)(),[m,h]=(0,o.useState)(null);console.log("Edit component - current attributes:",{blockTitle:n,blockSubtitle:r,sections:c});const x=(0,o.useCallback)((e,i,s)=>{console.log("Updating section:",{index:e,field:i,value:s});const l=[...c||[]];l[e]&&(l[e]={...l[e],[i]:s},a({sections:l}),console.log("Updated sections:",l))},[c,a]),v=(0,o.useCallback)(()=>{if(c.length>=4)return;const e={id:Date.now(),title:`Section ${c.length+1}`,text:"Enter your section content here...",videoUrl:""};a({sections:[...c,e]})},[c,a]),p=(0,o.useCallback)(e=>{const i=c.filter((i,s)=>s!==e);a({sections:i}),m===e&&h(null)},[c,m,a]);return(0,t.jsxs)("div",{...d,children:[(0,t.jsxs)(s.InspectorControls,{children:[(0,t.jsxs)(l.PanelBody,{title:(0,i.__)("Block Settings","somira"),children:[(0,t.jsx)(l.TextControl,{label:(0,i.__)("Block Title","somira"),value:n,onChange:e=>a({blockTitle:e}),help:(0,i.__)("Main title for the scroll section","somira")}),(0,t.jsx)(l.TextControl,{label:(0,i.__)("Block Subtitle","somira"),value:r,onChange:e=>a({blockSubtitle:e}),help:(0,i.__)("Subtitle text below the main title","somira")})]}),(0,t.jsxs)(l.PanelBody,{title:(0,i.__)("Video Sections","somira"),initialOpen:!0,children:[(0,t.jsx)("p",{children:(0,i.__)("Manage your scroll video sections (max 4):","somira")}),0===c.length&&(0,t.jsx)("p",{style:{fontStyle:"italic",color:"#666"},children:(0,i.__)('No sections added yet. Click "Add Section" below to get started.',"somira")}),c.map((e,o)=>(0,t.jsxs)(l.Card,{style:{marginBottom:"20px",backgroundColor:m===o?"#f0f8ff":"#fafafa"},children:[(0,t.jsx)(l.CardHeader,{children:(0,t.jsxs)("h4",{style:{margin:"0"},children:[(0,i.__)("Section","somira")," ",o+1]})}),(0,t.jsxs)(l.CardBody,{children:[(0,t.jsx)(l.TextControl,{label:(0,i.__)("Section Title","somira"),value:e.title,onChange:e=>x(o,"title",e),placeholder:(0,i.__)("Enter section title...","somira"),style:{marginBottom:"10px"}}),(0,t.jsx)(l.TextControl,{label:(0,i.__)("Section Text","somira"),value:e.text,onChange:e=>x(o,"text",e),placeholder:(0,i.__)("Enter section description...","somira"),style:{marginBottom:"15px"}}),(0,t.jsx)(s.MediaUploadCheck,{children:(0,t.jsx)(s.MediaUpload,{onSelect:e=>x(o,"videoUrl",e.url),allowedTypes:["video"],value:e.id,render:({open:s})=>(0,t.jsx)(l.Button,{onClick:s,variant:"secondary",style:{marginBottom:"10px"},children:e.videoUrl?(0,i.__)("Change Video","somira"):(0,i.__)("Select Video","somira")})})}),e.videoUrl&&(0,t.jsx)("div",{style:{marginBottom:"10px"},children:(0,t.jsxs)("small",{style:{color:"#666"},children:[(0,i.__)("Video:","somira")," ",e.videoUrl.split("/").pop()]})}),(0,t.jsx)(l.Button,{onClick:()=>p(o),variant:"secondary",isDestructive:!0,size:"small",children:(0,i.__)("Remove Section","somira")})]})]},e.id)),c.length<4&&(0,t.jsxs)(l.Button,{onClick:v,variant:"primary",style:{marginTop:"10px"},children:[(0,i.__)("Add Section","somira")," (",c.length,"/4)"]})]})]}),(0,t.jsxs)("div",{className:"scroll-video-editor",children:[(0,t.jsxs)("div",{className:"editor-header",children:[(0,t.jsx)(s.RichText,{tagName:"h1",className:"block-title",value:n,onChange:e=>a({blockTitle:e}),placeholder:(0,i.__)("Block title...","somira"),allowedFormats:[]}),(0,t.jsx)(s.RichText,{tagName:"p",className:"block-subtitle",value:r,onChange:e=>a({blockSubtitle:e}),placeholder:(0,i.__)("Block subtitle...","somira"),allowedFormats:[]})]}),(0,t.jsx)("div",{className:"editor-preview",children:0===c.length?(0,t.jsx)(l.Placeholder,{label:(0,i.__)("Scroll Video Sections","somira"),instructions:(0,i.__)("Add sections using the sidebar panel to get started.","somira"),children:(0,t.jsx)(l.Button,{onClick:v,variant:"primary",children:(0,i.__)("Add First Section","somira")})}):(0,t.jsxs)("div",{className:"sections-grid",children:[(0,t.jsxs)("div",{className:"sections-column",children:[(0,t.jsx)("h3",{children:(0,i.__)("Text Sections","somira")}),c.map((e,s)=>(0,t.jsxs)("div",{className:"section-preview "+(m===s?"active":""),onClick:()=>h(s),style:{padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",marginBottom:"1rem",cursor:"pointer",backgroundColor:m===s?"#e3f2fd":"#fff"},children:[(0,t.jsx)("h4",{style:{margin:"0 0 0.5rem 0"},children:e.title}),(0,t.jsx)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"},children:e.text||(0,i.__)("No content yet...","somira")})]},e.id))]}),(0,t.jsxs)("div",{className:"videos-column",children:[(0,t.jsx)("h3",{children:(0,i.__)("Videos","somira")}),c.map((e,s)=>(0,t.jsx)("div",{className:"video-preview",style:{marginBottom:"1rem",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"},children:e.videoUrl?(0,t.jsx)("video",{src:e.videoUrl,style:{width:"100%",height:"auto",maxHeight:"200px"},controls:!1,muted:!0}):(0,t.jsx)("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#f5f5f5",color:"#666"},children:(0,i.__)("No video selected","somira")})},e.id))]})]})})]})]})},save:function({attributes:e}){const{blockTitle:i,blockSubtitle:l,sections:o}=e,a=s.useBlockProps.save();"undefined"!=typeof console&&console.log("Scroll Video Sections save data:",{blockTitle:i,blockSubtitle:l,sections:o});const n=(o||[]).filter(e=>e&&(e.videoUrl||e.title||e.text));return(0,t.jsxs)("div",{...a,"data-block-path":"/wp-content/themes/somira/blocks/scroll-video-sections/",children:[(0,t.jsxs)("div",{className:"scroll-video-wrapper",children:[(0,t.jsxs)("div",{className:"scroll-video-header",children:[(0,t.jsx)(s.RichText.Content,{tagName:"h2",className:"scroll-video-title",value:i}),(0,t.jsx)(s.RichText.Content,{tagName:"p",className:"scroll-video-subtitle",value:l})]}),(0,t.jsxs)("div",{className:"scroll-video-container",children:[(0,t.jsx)("div",{className:"text-sections-column",children:n.map((e,i)=>(0,t.jsx)("div",{className:"text-section","data-section-index":i,children:(0,t.jsxs)("div",{className:"section-content",children:[(0,t.jsx)("h3",{className:"section-title",children:e.title}),(0,t.jsx)("p",{className:"section-text",children:e.text})]})},e.id||i))}),(0,t.jsx)("div",{className:"video-sections-column",children:(0,t.jsxs)("div",{className:"video-container",children:[n.map((e,i)=>(0,t.jsx)("div",{className:"video-section","data-video-index":i,style:{display:0===i?"block":"none"},children:e.videoUrl?(0,t.jsx)("video",{className:"scroll-video",src:e.videoUrl,muted:!0,playsInline:!0,preload:"metadata","data-section":i}):(0,t.jsx)("div",{className:"video-placeholder",children:(0,t.jsxs)("p",{children:["No video selected for section ",i+1]})})},e.id||i)),(0,t.jsx)("button",{className:"video-pause-button","aria-label":"Pause auto-play",children:(0,t.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",children:[(0,t.jsx)("rect",{x:"6",y:"4",width:"4",height:"16",fill:"currentColor"}),(0,t.jsx)("rect",{x:"14",y:"4",width:"4",height:"16",fill:"currentColor"})]})})]})})]})]}),(0,t.jsxs)("div",{className:"mobile-scroll-video",children:[(0,t.jsxs)("div",{className:"mobile-header",children:[(0,t.jsx)(s.RichText.Content,{tagName:"h2",className:"mobile-title",value:i}),(0,t.jsx)(s.RichText.Content,{tagName:"p",className:"mobile-subtitle",value:l})]}),(0,t.jsx)("div",{className:"mobile-carousel",children:n.map((e,i)=>(0,t.jsxs)("div",{className:"mobile-slide","data-slide-index":i,children:[(0,t.jsx)("div",{className:"mobile-video-container",children:e.videoUrl?(0,t.jsx)("video",{className:"mobile-video",src:e.videoUrl,muted:!0,playsInline:!0,preload:"metadata",loop:!0,"data-section":i}):(0,t.jsx)("div",{className:"mobile-video-placeholder",children:(0,t.jsxs)("p",{children:["No video selected for section ",i+1]})})}),(0,t.jsx)("div",{className:"mobile-text-section",children:(0,t.jsxs)("div",{className:"mobile-text-content",children:[(0,t.jsx)("h3",{className:"mobile-section-title",children:e.title}),(0,t.jsx)("p",{className:"mobile-section-text",children:e.text})]})})]},e.id||i))})]})]})}})}},s={};function l(e){var o=s[e];if(void 0!==o)return o.exports;var t=s[e]={exports:{}};return i[e](t,t.exports,l),t.exports}l.m=i,e=[],l.O=(i,s,o,t)=>{if(!s){var a=1/0;for(d=0;d<e.length;d++){for(var[s,o,t]=e[d],n=!0,r=0;r<s.length;r++)(!1&t||a>=t)&&Object.keys(l.O).every(e=>l.O[e](s[r]))?s.splice(r--,1):(n=!1,t<a&&(a=t));if(n){e.splice(d--,1);var c=o();void 0!==c&&(i=c)}}return i}t=t||0;for(var d=e.length;d>0&&e[d-1][2]>t;d--)e[d]=e[d-1];e[d]=[s,o,t]},l.o=(e,i)=>Object.prototype.hasOwnProperty.call(e,i),(()=>{var e={57:0,350:0};l.O.j=i=>0===e[i];var i=(i,s)=>{var o,t,[a,n,r]=s,c=0;if(a.some(i=>0!==e[i])){for(o in n)l.o(n,o)&&(l.m[o]=n[o]);if(r)var d=r(l)}for(i&&i(s);c<a.length;c++)t=a[c],l.o(e,t)&&e[t]&&e[t][0](),e[t]=0;return l.O(d)},s=globalThis.webpackChunksomira_theme=globalThis.webpackChunksomira_theme||[];s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s))})();var o=l.O(void 0,[350],()=>l(802));o=l.O(o)})();