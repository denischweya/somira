(()=>{"use strict";var e,t={312:()=>{const e=window.wp.blocks,t=window.React,l=window.wp.i18n,o=window.wp.blockEditor,a=window.wp.components,i=window.wp.element,n=JSON.parse('{"UU":"somira/scroll-video-sections"}');(0,e.registerBlockType)(n.UU,{edit:function({attributes:e,setAttributes:n}){const{blockTitle:r,blockSubtitle:c,sections:s=[]}=e,m=(0,o.useBlockProps)(),[d,v]=(0,i.useState)(null);console.log("Edit component - current attributes:",{blockTitle:r,blockSubtitle:c,sections:s});const p=(0,i.useCallback)((e,t,l)=>{console.log("Updating section:",{index:e,field:t,value:l});const o=[...s||[]];o[e]&&(o[e]={...o[e],[t]:l},n({sections:o}),console.log("Updated sections:",o))},[s,n]),u=(0,i.useCallback)(()=>{if(s.length>=4)return;const e={id:Date.now(),title:`Section ${s.length+1}`,text:"Enter your section content here...",videoUrl:""};n({sections:[...s,e]})},[s,n]),b=(0,i.useCallback)(e=>{const t=s.filter((t,l)=>l!==e);n({sections:t}),d===e&&v(null)},[s,d,n]);return(0,t.createElement)("div",{...m},(0,t.createElement)(o.InspectorControls,null,(0,t.createElement)(a.PanelBody,{title:(0,l.__)("Block Settings","somira")},(0,t.createElement)(a.TextControl,{label:(0,l.__)("Block Title","somira"),value:r,onChange:e=>n({blockTitle:e}),help:(0,l.__)("Main title for the scroll section","somira")}),(0,t.createElement)(a.TextControl,{label:(0,l.__)("Block Subtitle","somira"),value:c,onChange:e=>n({blockSubtitle:e}),help:(0,l.__)("Subtitle text below the main title","somira")})),(0,t.createElement)(a.PanelBody,{title:(0,l.__)("Video Sections","somira"),initialOpen:!0},(0,t.createElement)("p",null,(0,l.__)("Manage your scroll video sections (max 4):","somira")),0===s.length&&(0,t.createElement)("p",{style:{fontStyle:"italic",color:"#666"}},(0,l.__)('No sections added yet. Click "Add Section" below to get started.',"somira")),s.map((e,i)=>(0,t.createElement)(a.Card,{key:e.id,style:{marginBottom:"20px",backgroundColor:d===i?"#f0f8ff":"#fafafa"}},(0,t.createElement)(a.CardHeader,null,(0,t.createElement)("h4",{style:{margin:"0"}},(0,l.__)("Section","somira")," ",i+1)),(0,t.createElement)(a.CardBody,null,(0,t.createElement)(a.TextControl,{label:(0,l.__)("Section Title","somira"),value:e.title,onChange:e=>p(i,"title",e),placeholder:(0,l.__)("Enter section title...","somira"),style:{marginBottom:"10px"}}),(0,t.createElement)(a.TextControl,{label:(0,l.__)("Section Text","somira"),value:e.text,onChange:e=>p(i,"text",e),placeholder:(0,l.__)("Enter section description...","somira"),style:{marginBottom:"15px"}}),(0,t.createElement)(o.MediaUploadCheck,null,(0,t.createElement)(o.MediaUpload,{onSelect:e=>p(i,"videoUrl",e.url),allowedTypes:["video"],value:e.id,render:({open:o})=>(0,t.createElement)(a.Button,{onClick:o,variant:"secondary",style:{marginBottom:"10px"}},e.videoUrl?(0,l.__)("Change Video","somira"):(0,l.__)("Select Video","somira"))})),e.videoUrl&&(0,t.createElement)("div",{style:{marginBottom:"10px"}},(0,t.createElement)("small",{style:{color:"#666"}},(0,l.__)("Video:","somira")," ",e.videoUrl.split("/").pop())),(0,t.createElement)(a.Button,{onClick:()=>b(i),variant:"secondary",isDestructive:!0,size:"small"},(0,l.__)("Remove Section","somira"))))),s.length<4&&(0,t.createElement)(a.Button,{onClick:u,variant:"primary",style:{marginTop:"10px"}},(0,l.__)("Add Section","somira")," (",s.length,"/4)"))),(0,t.createElement)("div",{className:"scroll-video-editor"},(0,t.createElement)("div",{className:"editor-header"},(0,t.createElement)(o.RichText,{tagName:"h1",className:"block-title",value:r,onChange:e=>n({blockTitle:e}),placeholder:(0,l.__)("Block title...","somira"),allowedFormats:[]}),(0,t.createElement)(o.RichText,{tagName:"p",className:"block-subtitle",value:c,onChange:e=>n({blockSubtitle:e}),placeholder:(0,l.__)("Block subtitle...","somira"),allowedFormats:[]})),(0,t.createElement)("div",{className:"editor-preview"},0===s.length?(0,t.createElement)(a.Placeholder,{label:(0,l.__)("Scroll Video Sections","somira"),instructions:(0,l.__)("Add sections using the sidebar panel to get started.","somira")},(0,t.createElement)(a.Button,{onClick:u,variant:"primary"},(0,l.__)("Add First Section","somira"))):(0,t.createElement)("div",{className:"sections-grid"},(0,t.createElement)("div",{className:"sections-column"},(0,t.createElement)("h3",null,(0,l.__)("Text Sections","somira")),s.map((e,o)=>(0,t.createElement)("div",{key:e.id,className:"section-preview "+(d===o?"active":""),onClick:()=>v(o),style:{padding:"1rem",border:"1px solid #ddd",borderRadius:"8px",marginBottom:"1rem",cursor:"pointer",backgroundColor:d===o?"#e3f2fd":"#fff"}},(0,t.createElement)("h4",{style:{margin:"0 0 0.5rem 0"}},e.title),(0,t.createElement)("p",{style:{margin:"0",fontSize:"0.9rem",color:"#666"}},e.text||(0,l.__)("No content yet...","somira"))))),(0,t.createElement)("div",{className:"videos-column"},(0,t.createElement)("h3",null,(0,l.__)("Videos","somira")),s.map((e,o)=>(0,t.createElement)("div",{key:e.id,className:"video-preview",style:{marginBottom:"1rem",border:"1px solid #ddd",borderRadius:"8px",overflow:"hidden"}},e.videoUrl?(0,t.createElement)("video",{src:e.videoUrl,style:{width:"100%",height:"auto",maxHeight:"200px"},controls:!1,muted:!0}):(0,t.createElement)("div",{style:{padding:"2rem",textAlign:"center",backgroundColor:"#f5f5f5",color:"#666"}},(0,l.__)("No video selected","somira")))))))))},save:function({attributes:e}){const{blockTitle:l,blockSubtitle:a,sections:i}=e,n=o.useBlockProps.save();"undefined"!=typeof console&&console.log("Scroll Video Sections save data:",{blockTitle:l,blockSubtitle:a,sections:i});const r=(i||[]).filter(e=>e&&(e.videoUrl||e.title||e.text));return(0,t.createElement)("div",{...n,"data-block-path":"/wp-content/themes/somira/blocks/scroll-video-sections/"},(0,t.createElement)("div",{className:"scroll-video-wrapper"},(0,t.createElement)("div",{className:"scroll-video-header"},(0,t.createElement)(o.RichText.Content,{tagName:"h1",className:"scroll-video-title",value:l}),(0,t.createElement)(o.RichText.Content,{tagName:"p",className:"scroll-video-subtitle",value:a})),(0,t.createElement)("div",{className:"scroll-video-container"},(0,t.createElement)("div",{className:"text-sections-column"},r.map((e,l)=>(0,t.createElement)("div",{key:e.id||l,className:"text-section","data-section-index":l},(0,t.createElement)("div",{className:"section-content"},(0,t.createElement)("h3",{className:"section-title"},e.title),(0,t.createElement)("p",{className:"section-text"},e.text))))),(0,t.createElement)("div",{className:"video-sections-column"},(0,t.createElement)("div",{className:"video-container"},r.map((e,l)=>(0,t.createElement)("div",{key:e.id||l,className:"video-section","data-video-index":l,style:{display:0===l?"block":"none"}},e.videoUrl?(0,t.createElement)("video",{className:"scroll-video",src:e.videoUrl,muted:!0,playsInline:!0,preload:"metadata","data-section":l}):(0,t.createElement)("div",{className:"video-placeholder"},(0,t.createElement)("p",null,"No video selected for section ",l+1)))))))),(0,t.createElement)("div",{className:"mobile-scroll-alternative"},(0,t.createElement)("div",{className:"mobile-scroll-container",style:{height:100*r.length+"vh"}},(0,t.createElement)("canvas",{id:"mobileSequence",className:"mobile-canvas",width:"450",height:"800"})),(0,t.createElement)("div",{className:"mobile-overlay"},(0,t.createElement)("h2",{className:"mobile-text-title",id:"mobileTextTitle"},r[0]?.title||"Interactive Experience"),(0,t.createElement)("p",{className:"mobile-text-description",id:"mobileTextDescription"},r[0]?.text||"Scroll to explore the interactive experience."))))}})}},l={};function o(e){var a=l[e];if(void 0!==a)return a.exports;var i=l[e]={exports:{}};return t[e](i,i.exports,o),i.exports}o.m=t,e=[],o.O=(t,l,a,i)=>{if(!l){var n=1/0;for(m=0;m<e.length;m++){for(var[l,a,i]=e[m],r=!0,c=0;c<l.length;c++)(!1&i||n>=i)&&Object.keys(o.O).every(e=>o.O[e](l[c]))?l.splice(c--,1):(r=!1,i<n&&(n=i));if(r){e.splice(m--,1);var s=a();void 0!==s&&(t=s)}}return t}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[l,a,i]},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={57:0,350:0};o.O.j=t=>0===e[t];var t=(t,l)=>{var a,i,[n,r,c]=l,s=0;if(n.some(t=>0!==e[t])){for(a in r)o.o(r,a)&&(o.m[a]=r[a]);if(c)var m=c(o)}for(t&&t(l);s<n.length;s++)i=n[s],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(m)},l=globalThis.webpackChunksomira_theme=globalThis.webpackChunksomira_theme||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var a=o.O(void 0,[350],()=>o(312));a=o.O(a)})();